<script src="../../../docs/lib/van/1.2.6/nomodule.min.js"></script>
<script src="gamepad-manager.js"></script>
<script src="ui.js"></script>
<script>
window.addEventListener('DOMContentLoaded', async(e)=>{
    console.log('DOMContentLoaded')
    const ui = new Ui()
    const gpm = new GamepadManager({
        onChangedPad:(e)=>{
            document.querySelector('main').replaceWith(ui.make(e))
        },
        onLoop:(e)=>{
            ui.update(e)
        }
    })
    gpm.addEvent()
    /*
    window.addEventListener('gamepadconnected', async(e)=>{
        console.log('gamepadconnected:', e)
        // onConnect
        // onConnectStandard
        // onConnectNotStandard
        //requestAnimationFrame()
    });
    window.addEventListener('gamepaddisconnected', async(e)=>{
        console.log('gamepaddisconnected:', e)

    });
    */
    window.addEventListener('beforeunload', (event) => {
        console.log('beforeunload!!');
        gpm.delEvent()
    });
});
</script>

<body>
<main></main>
</body>
