# 入力装置

* Keyboard
* GamePad
* Mouse, TrackBall
* PenTab
* Touch

Dev|HID
---|---
PC|Keyboard, Mouse
Tablet|Touch, PenTab

HID|event
---|-----
Keyboard|keydown, keyup
Mouse,TrackBall,PenTab,Touch|click, pointer(over/out,enter/leave,down/up,cancel/gotpointercapture/lostpointercapture)
Mouse|mouse(enter/leave,), drag(drag,dragstart/dragend,dragenter/dragleave,dragover,drop)
Touch|touch(start,move,cancel,end)

Pointer|Mouse|Touch
-------|-----|-----
pointerdown|mousedown|touchstart
pointerup|mouseup|touchend
pointercancel|-|touchcancel
pointermove|mousemove|touchmove
pointerenter|mouseenter|-
pointerleave|mouseleave|-
pointerover|mouseover|-
pointerout|mouseout|-

　[Drag & Drop API][]はマウスのみ対応。タッチやペンは非対応。HTML要素の移動は`touchmove`や`pointermove`等で実装可能と思われるが、ブラウザ外からファイルをドロップするような挙動は実装不可と思われる。

[Drag & Drop API]:https://developer.mozilla.org/ja/docs/Web/API/HTML_Drag_and_Drop_API/Drag_operations

# マウスとタッチ（ペン）の違い

　カーソル（ポインタ）が常在か否か。

マウス|タッチ|ペン
------|------|----
常在|タッチ時のみ存在する|タッチ時のみ存在する

　この違いが操作上における重大な差異を生む。

## リスト選択操作

　リストUIから特定のアイテムを選択する場面をイメージしてほしい。複数の項目が並んでいる。それを一つ選んで詳細を確認していく。

```
項目１ ← 詳細説明...
項目２
項目３
```

　３つある項目から１つ選ぶ。選ばれた項目にはカーソルが当たる。ここでは`←`で示す。上記だと項目１にカーソルが当たっている。

　選択された項目の詳細が画面右に表示される。カーソルを変更すると、該当項目の説明に変わる。表示される説明は常にカーソルが当たっている項目一つのみ。

　以上の条件で、マウスとタッチ（ペン）で操作する。

　マウスはカーソル（ポインタ）が常在するため、`mousemove`しただけでカーソル位置を変更できる。それに対してタッチやペンはタップすることでカーソル位置の変更となる。なぜならタッチ（ペン）はカーソルが常在しておらず、タッチするまで存在しないから。

　マウスはクリックすることで決定する。決定とは複数の選択肢からどれか一つを選び取ることである。問題はタッチ操作だ。タップはカーソル移動（項目選択）の操作であるから使えない。ダブルタップまたは長押しで解決するのが簡単かもしれない。あるいは詳細説明の表示を長押しにするほうがいいかもしれない。

操作|マウス|タッチ（ペン）
----|------|-------------
カーソル移動（項目選択（詳細表示））|`mousemove`|`長押し`/`tap`
決定|`click`|`tap`/`長押し`/`wTap`
スクロール|`wheel`|`swipe`

　各操作用ボタンを画面に表示してもいいが、メインコンテンツを阻害するため次善策である。

操作名|概要
------|----
tap|クリック相当（down/upの間座標がほぼ変化しない）
wtap|ダブルクリック相当（高速で二回連続tapする）
hold|長押し（クリックと同じだがupするまで2秒くらいかける）
swipe|ドラッグ相当（カーソルを置いたまま座標を移動した後カーソルを離す）

　tap, hold, swipeの3つくらいあればタッチやペンでもマウス相当の動作を代用できる。


